{% extends 'base.html' %}

{% load static %}

{% block title %}
    Personal Room
{% endblock %}

{% block content %}

    <main class="container">
        <div class="row">
            <div class="col-6 mx-auto col-md-6 col-lg-6">
                <h1 class="my-5 text-center">Personal Room
                    <a class="ml-5" href="{% url 'cabinet-update' %}">
                        <span class="material-icons">edit</span>
                    </a>
                    <a class="ml-5" href="{% url 'cabinet-delete' %}">
                        <span class="material-icons">delete</span>
                    </a>
                </h1>
                <dl class="row ml-5">
                    <dt class="col-sm-5 mb-3">Username:</dt>
                        <dd class="col-sm-7">{{ user.username }}</dd>
                    <dt class="col-sm-5 mb-3">First Name:</dt>
                        <dd class="col-sm-7">{{ user.first_name }}</dd>
                    <dt class="col-sm-5 mb-3">Last Name:</dt>
                        <dd class="col-sm-7">{{ user.last_name }}</dd>
                    <dt class="col-sm-5 mb-3">E-mail:</dt>
                        <dd class="col-sm-7">{{ user.email }}</dd>
                    <dt class="col-sm-5 mb-3">Group:</dt>
                        {% if user.groups.all.0 is None %}
                        <dd class="col-sm-7">Administrators</dd>
                        {% else %}
                        <dd class="col-sm-7">{{ user.groups.all.0.name }}</dd>
                        {% endif %}
                    <hr>
                    <dt class="col-sm-5 mb-3">Access Grant Date:</dt>
                        <dd class="col-sm-7">{{ user.date_joined }}</dd>
                    <dt class="col-sm-5 mb-3">Last Visit:</dt>
                        <dd class="col-sm-7">{{ user.last_login }}</dd>
                </dl>
            </div>
            <img class="user-img" src="{{ user.image.url }}" alt="{{ user.last_name }} {{ user.first_name }}">
            <div class="clearfix"></div>
        </div>
        {% for action in interaction %}
        <div class="row">
            <div class="col-6 mx-auto col-md-6 col-lg-6">
                <div>
                    <div class="card mb-3 ml-3">
                        <div class="card-body text-secondary">
                            <h5 class="card-title">
                                <a href="">
                                    {{ action.get_appeals }}
                                </a>
                                <a href=""
                                   class="float-right"><span class="material-icons">edit</span>
                                </a>
                            </h5>
                            <p class="card-text">{{ action.description|safe|truncatechars:150 }}</p>
                        </div>
                        <div class="card-footer">
                            <small class="float-right font-italic">Rating: {{ action.rating }}</small>
                            <div class="clearfix"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}
    </main>

{% endblock %}